$(document).ready(function(){Bookstarzz.ws.WSLibros.getPopulares(cargarCategorias,function(o){"System.Security.SecurityException"==o._exceptionType?window.location.replace("FrmLogin.aspx"):($("#cntMsg").text("Error: no se ha podido cargar los libros en el carrucel"),$("#cntMsg").parent().show())}),"nada"!=$("#txtError").val()&&($("#cntMsg").text($("#txtError").val()),$("#cntMsg").parent().show(),$("#txtError").val("nada"))});var mas=0;let cantidad=9;function verMas(){let o=!0,r=0;0==mas?cantidad+=9:(Bookstarzz.ws.WSLibros(function(o){o?r=JSON.parse(o):($("#cntMsg").text("Error: no se ha podido cargar los libros nuevos en existencia"),$("#cntMsg").parent().show())},function(o){"System.Security.SecurityException"==o._exceptionType?window.location.replace("FrmLogin.aspx"):($("#cntMsg").text("Error: no se ha podido cargar los libros nuevos en existencia"),$("#cntMsg").parent().show())}),parseInt(r)>cantidad+9?cantidad+=9:o=!1),o?Bookstarzz.ws.WSLibros.getNuevos(cantidad,function(o){if(o){let t=JSON.parse(o);for(var r=[],a=t.length-9;a<t.length;a++){t[a];r.push({IdLibro:t[a].IdLibro,Nombre:t[a].Nombre})}crearLibrosNuevos(JSON.stringify(r))}else $("#cntMsg").text("Error: no se ha podido cargar los libros nuevos en existencia"),$("#cntMsg").parent().show()},function(o){"System.Security.SecurityException"==o._exceptionType?window.location.replace("FrmLogin.aspx"):($("#cntMsg").text("Error: no se ha podido cargar los libros nuevos en existencia"),$("#cntMsg").parent().show())}):($("#cntMsg").text("Error: No hay mas libros para mostrar"),$("#cntMsg").parent().show())}function cargarCategorias(o){if(Bookstarzz.ws.WSCategorias.getAll(crearSidebar,function(o){"System.Security.SecurityException"==o._exceptionType?window.location.replace("FrmLogin.aspx"):($("#cntMsg").text("Error: no se ha podido cargar las categorias de los libros"),$("#cntMsg").parent().show())}),o){const r="libros/";let a=JSON.parse(o),t="",e=1;a.forEach(function(o){for(var a=0;a<o.Nombre.length;a++)" "!=o.Nombre[a]&&(t+=o.Nombre[a]);$(".glide__slides").append($("<img>").attr("src",r+t+".jpg").addClass("cuadros").attr("id",o.IdLibro)),t="";let s=o.IdLibro.toString();$("#"+s).bind("click",function(){$("#contenidoVista").load("FrmLibro.aspx",{id:s})}),$(".glide__bullets").append("<button/>").addClass("glide__bullet"),$(".glide__bullets").attr("data-glide-dir","cuadro"+e),e++}),new Glide(".glide",{type:"carousel",startAt:5,focusAt:"center",autoplay:2e3,perView:4,breakpoints:{800:{perView:2},480:{perView:1}}}).mount()}else $("#cntMsg").text("Error: no se ha podido cargar el carrusel"),$("#cntMsg").parent().show()}function crearSidebar(o){if(Bookstarzz.ws.WSLibros.getNuevos(9,crearLibrosNuevos,function(o){"System.Security.SecurityException"==o._exceptionType?window.location.replace("FrmLogin.aspx"):($("#cntMsg").text("Error: no se ha podido cargar los libros nuevos en existencia"),$("#cntMsg").parent().show())}),console.log(o),o){JSON.parse(o).forEach(function(o){$(".list-group").append($("<a>").addClass("list-group-item list-group-item-action").html(o.nombreCategoria).attr("href","#").attr("id",o.idCategoria)),$("#"+o.idCategoria).bind("click",function(){cargarXCategoria(o.idCategoria)})})}else $("#cntMsg").text("Error: no se ha podido Cargar las categorias de los libros"),$("#cntMsg").parent().show()}function cargarXCategoria(o){Bookstarzz.ws.WSCategorias.getCategoria(o,function(o){if(o){const r="libros/";let a=JSON.parse(o),t=0,e="";a.forEach(function(o){for(var a=0;a<o.Nombre.length;a++)" "!=o.Nombre[a]&&(e+=o.Nombre[a]);t<3?$(".uno").append($("<div>").addClass("col-4").append($("<img>").attr("src",r+e+".jpg").addClass("cuadros").attr("id",o.IdLibro))):t>2&&t<6?$(".dos").append($("<div>").addClass("col-4").append($("<img>").attr("src",r+e+".jpg").addClass("cuadros").attr("id",o.IdLibro))):$(".tres").append($("<div>").addClass("col-4").append($("<img>").attr("src",r+e+".jpg").addClass("cuadros").attr("id",o.IdLibro)));let s=o.IdLibro.toString();$("#"+s).bind("click",function(){$("#contenidoVista").load("FrmLibro.aspx",{id:s})}),t++,e=""})}else $("#cntMsg").text("Error: no se ha podido cargar la pagina con la categoria especificada"),$("#cntMsg").parent().show()},function(o){"System.Security.SecurityException"==o._exceptionType?window.location.replace("FrmLogin.aspx"):($("#cntMsg").text("No se ha podido cargar la pagina con la categoria especificada"),$("#cntMsg").parent().show())})}function crearLibrosNuevos(o){if(console.log(o),o){const r="libros/";let a=JSON.parse(o),t=0,e="";console.log(a),a.forEach(function(o){for(var a=0;a<o.Nombre.length;a++)" "!=o.Nombre[a]&&(e+=o.Nombre[a]);t<3?$(".uno").append($("<div>").addClass("col-4").append($("<img>").attr("src",r+e+".jpg").addClass("cuadros").attr("id",o.IdLibro))):t>2&&t<6?$(".dos").append($("<div>").addClass("col-4").append($("<img>").attr("src",r+e+".jpg").addClass("cuadros").attr("id",o.IdLibro))):$(".tres").append($("<div>").addClass("col-4").append($("<img>").attr("src",r+e+".jpg").addClass("cuadros").attr("id",o.IdLibro)));let s=o.IdLibro.toString();$("#"+s).bind("click",function(){$("#contenidoVista").load("FrmLibro.aspx",{id:s})}),t++,e=""})}else $("#cntMsg").text("Error: no se ha podido cargar la seccion de los libros resientemente disponibles"),$("#cntMsg").parent().show()}var NRows=64;function TraerMasLibros(o){if(o>0){}}