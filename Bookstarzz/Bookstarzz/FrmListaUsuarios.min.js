var tablaUsuarios;function cargarMunicipios(){Bookstarzz.ws.WSUsuarios.getAll(function(a){a?cargarDatos(JSON.parse(a)):window.location.replace("FrmLogin.aspx")},function(a){"System.Security.SecurityException"==a._exceptionType?window.location.replace("FrmLogin.aspx"):($("#msgError").text(a._message),$("#mdlError").modal().show())})}function cargarDatos(a){tablaUsuarios=$("#tblUsuarios").dataTable({data:a,columnDefs:[{width:"5%",targets:[0,1,2,3]},{width:"10%",targets:[4]},{width:"5%",targets:[5,6]},{width:"10%",targets:[7]},{width:"25%",targets:[8,9]}],columns:[{title:"ID",data:"IdUsuario"},{title:"Nombre",data:"Nombre"},{title:"Apellido Paterno",data:"ApellidoP"},{title:"Apellido Materno",data:"ApellidoM"},{title:"Email",data:"Email"},{title:"Tipo",data:"Tipo"},{title:"Usuario",data:"UsuarioN"},{title:"Telefono",data:"Telefono"},{title:"Tarjeta",data:"Targeta"},{title:"",data:null,render:function(a,t,o){return'<div class="row justify-content-center"><button type="button" onclick="editar('+a.IdUsuario+')" class="btn btn-primary">Editar</button><button type="button" onclick="eliminar('+a.IdUsuario+", '"+a.Nombre+'\')" class="btn btn-danger">Eliminar</button></div>'}}]})}function editar(a){$("#contenidoVista").load("FrmRegistrar.aspx",{editar:1})}function eliminar(a,t){$("#IdUsuario").val(a),$("#nombre").text(t),$("#mdlConfirmar").modal()}function cofirmEliminar(){$("#mdlConfirmar").modal("hide");let a=$("#IdUsuario").val();Bookstarzz.ws.WSUsuarios.delete(a,function(a){a?(recargarDatos(),$("#cntMsgExito").parent().show(),window.setTimeout(function(){$("#cntMsgExito").parent().alert("close")},1e4)):window.location.replace("FrmLogin.aspx")},function(a){$("#cntMsg").text("Error: no se ha podido realizar la operación"),$("#cntMsg").parent().show()})}function recargarDatos(){tablaUsuarios.fnClearTable(),Bookstarzz.ws.WSUsuarios.WSMunicipios.getAll(function(a){a?tablaUsuarios.fnAddData(JSON.parse(a)):window.location.replace("FrmLogin.aspx")},function(a){$("#cntMsg").text("Error: no se ha podido realizar la operación"),$("#cntMsg").parent().show()})}$(document).ready(function(){$("#divBloque2").removeClass("col-10"),$("#divBloque1").removeClass("col-2 pr-0"),$("#divBloque2").addClass("container-fluid"),$("#divBloque1").addClass("col"),$("#btnAgregar").click(function(){$("#contenidoVista").load("FrmRegistrar.aspx",{session:1})}),$("#btnConfirmarEliminar").click(cofirmEliminar),cargarMunicipios()});